
\chapter{变率和微商}
从本章起，我们开始学习单变量的微积分学的基本概念和基础理论。

微积分学是研究变量的数学，变量之间的关系就是函数，因此，函数是微积分学研究的主要对象。

在函数的基本性质中，有两个最基本、最重要的概念－变率与求和，为了解决求函数的变率与求函数$f$在$[a,b]$上的和的问题就相应地产生微分与积分运算，而这两种运算之间，也存在着一种自然的互逆关系，在本章中，我们由函数的变率问题引出函数的微商（导数）概念，并给出初等函数的一套求导法则，在下一章中，我们揭示微分运算与积分运算的互逆关系，这就是微积分学的基本定理。

总起来说，微分反映了函数的局部性质，或在某个点附近的性质；积分则反映了函数的整体性质，或某个区间的性质；函数的局部性质与整体性质之间的有机联系，恰恰反映了微分运算与积分运算之间的互逆关系。

\section{微商（导数）的定义}
函数关系$y=f(x)$就是确定变量$y$如何随着变量$x$的变动而变动的关系，对于给定的函数$y=f(x)$, 变量$y$在变量$x$的不同点附近的变动情况是不尽相同的，这就是说，在变量$x$的
某个值$x_1$外，当$x_1$略加变动时，相应的$y$的变动可能相当剧烈（急增，或急减）；而在变量$x$的另一个值$x_2$处，$y$的变动就可能较为迟缓，但是，用这样的语言来表达函数在某一点处的变率是不精确的，我们需要用“数量”来确切地表达这个意思，这就是函数在某点（或菜时刻）的变率的问题，简称变率。

\subsection{直线函数的变率}
一次函数$f (x) =kx+b$
是一种最简单的函数，它的函数图象是一条斜率等于$k$的直线，如图2.1所示。
\begin{figure}[htp]
    \centering
\begin{tikzpicture}[>=latex]
    \draw[->](-2,0)--(4,0)node[right]{$x$};
    \draw[->] (0,-1)--(0,5)node[right]{$y$};
    \draw[very thick] (-1.5,-.5)--(4,5);
\draw[->](-.2,0) arc (0:45:.8)node[below]{$\theta$};
\draw(2,3)node[left]{$P_1$}--(2,0)node[below]{$x_1$};
\draw(3,4)node[left]{$P$}--(3,0)node[below]{$x$};
\draw[|<->|](3.2,4)--node[right]{$f(x)-f(x_1)$}(3.2,3);
\draw[|<->|](2,2.8)--node[below]{$x-x_1$}(3,2.8);
\draw(2,3)--(3,3);\node at (.25,-.25){$O$};
\end{tikzpicture}
    \caption{}
\end{figure}

设$x_1$, $f(x_1)$和$x$, $f(x)$分别是直线上点$P_1$和$P$的坐标，为了反映函数变化快慢的问题，无论$x<x_1$还是$x>x_1$，自然地考虑在点$x_1$邻近，函数与自变量的相应的改变量的比：
\[\frac{f(x)-f(x_1)}{x-x_1}=\frac{(kx+b)-(kx_1+b)}{x-x_1}=k=\tan\theta\]
上面的表达式称为函数的\textbf{差商}，它表示函数在区间$[x_1,x]$或$[x,x_1]$上对于自变量$x$的\textbf{平均变化率}。由于$k$是不随变量$x$变动而变动的常数，因此，一次函数在自变量的任何一个区间内的平均变化率都是常数。

如果让自变量的变化区间的长度无限地缩短，也就是让$x$无限地接近于$x_1$时，平均变化率所趋向的极限
\[\lim_{x\to x_1} \frac{f (x) -f (x_1)}{x-x_1} =k\]

\subsection{平滑曲线的切线与变率}
一般的函数$y=f(x)$的图象通常不是直线，由于函数
和它的图象的多样性，为了讨论的方便起见，我们先把讨论的范围限制在“平滑”的曲线上，常用的函数$y=f(x)$的图象往往是“平滑的”，平滑性的直观内涵是：用愈高倍的显微镜去观察曲线的微段，就愈象直线段，比较明确的几何说法是：一条曲线在$P$点的平滑性就是存在唯一的一条过$P$点的切线，它无限地逼近曲线在$P$点邻近的微段，于是，当$y=f(x)$的图象$C$在$P$点存在唯一的一条切线时，我们就说曲线$C$在$P$点平滑，而$P$点叫做曲线的平滑点，一条在每点都平滑的曲线叫做平滑的曲线，一个函数的图象平滑曲线时，我们就称这种函数为平滑函数。

同学可能会问这样一个问题：在曲线的点$P$存在唯一的一条切线的含义是什么？因为迄今我们对于一般的曲线的切
线还未下过定义呢！

我们从图2.2和2.3注意到不能把切线定义为与曲线只有一个交点的直线。这样的定义限制得既太紧同时又太松。因
为，照此定义，图2.2所示的直线就不是过曲线上$P$点的切线了，实际上，尽管图2.2的直线与曲线还有一个交点$Q$, 但它在曲
线$P$点邻近却与曲线密合，故仍应该是过曲线$P$点的切线；又图2.3表明过抛物线上任何一点$P$与$y$轴平行的直线虽然与抛物线只有一个交点，但它的其余部分却远离$P$点邻近的弧，故它不应该是抛物线的切线，定义切线的可行途径是从割线开始，并应用极限的概念。


如图2.4所示，取曲线$y＝f(x)$上点$P$附近的另一点$Q$, 通过这两点画一条直线，这直线叫做过曲线上$P$点的割线，让$Q$点沿曲线向点$P$移动，这条割线将达到极限位置，此极限位置与$Q$点从哪一侧趋向于$P$是无关的，我们称这个割线的极限位置为过曲线上$P$点的切线。

割线的这种极限位置的存在性这一假设，与曲线在点$P$具有唯一的一条切线或确定的方向的假设是等价的。

现在我们要对曲线$y=f(x)$用解析式子把割线的这种极限位置存在的过程表示出来。
设$\alpha$是割线$PQ$同正$x$轴构成的夹角，$\alpha_1$是过点$P$点的切线同正$x$轴构成的夹角，于是
\[\lim_{Q\to P}\alpha=\alpha_1\]
设$x_1,y_1$和$x,y$分别是点$P$和$Q$的坐标，这时，我们立即得到
\[\tan\alpha=\frac{y-y_1}{x-x_1}=\frac{f(x)-f(x_1)}{x-x_1}\]
因此，上述求极限的过程（不考虑垂直切线$\alpha_1=\frac{\pi}{2}$的情况）可由下式来表示：
\[\lim_{x\to x_1}\frac{f(x)-f(x_1)}{x-x_1}=\lim_{\alpha\to \alpha_1}\tan\alpha=\tan\alpha_1\]
这就是说过曲线$y=f(x)$上$P(x_1,y_1)$点的切线的斜率等于$y=f(x)$的差商当$x\to x_1$时的极限．

\begin{example}
    求抛物线$y=ax^2+bx+c$在$x_0$处的切线的斜率。
\end{example}

\begin{solution}
    解依题意$(x_0,f(x_0)=ax_0^2+bx_0+c)$在抛物线上，并设$(x_0+h,f(x_0+h))$是抛物线上点$(x_0,f(x_0))$的附近的一点，我们有
\[\begin{split}
&\qquad \lim_{h\to 0}\frac{f(x_0+h)-f(x_0)}{(x_0+h)-x_0}\\
&=\lim_{h\to 0}\frac{[a(x_0+h)^2+b(x_0+h)+c]-[ax^2_0+bx_0+c]}{h}    \\
&=\lim_{h\to 0}\frac{(2ax_0+b)h+h^2}{h}\\
&=\lim_{h\to 0}[(2ax_0+b)+h]=2ax_0+b
\end{split}\]
所以抛物线$y=ax^2+bx+c$在$x_0$处的切线的斜率是$2ax_0+b$.
\end{solution}

\begin{example}
    一质点沿一直线在$t$秒内移动的距离是$s=s(t)=t^2+4t$。
    
    求：质点的初速度；在两秒末的速度；前两秒内的平均速度。
\end{example}

\begin{analyze}
    如果质点从起点开始所走的距离$s$是时间$t$的线性函数，则由2.1知道该质点在每一时刻的速度都是常数，它的大小由平均速度来确定，即等于一次函数的斜率，此时我们说该质点作匀速运动，但是，如果运动不再是匀速的，即质点的速度每时每刻都是变的，那么我们将时刻$t$的速度（也叫做瞬时速度）理解成什么呢？为了回答这个问题，我们考察差商
\[\frac{\Delta s}{\Delta t}=\frac{s(t)-s(t_0)}{t-t_0}\]
或者写成\[\frac{s(t_0+\Delta t)-s(t_0)}{\Delta t}\]
这个差商称为在$t_0$和$t_0+\Delta t$之间的这段时间间隔上的质点的平均速度，对照着$s=s(t)=t^2+4t$的图象来看，这个平均速度也就是过曲线上的$P(t_0,s(t_0))$
点及它邻近一点$Q(t_0+\Delta t,s(t_0+\Delta t))$的割线的斜率（图2.5）。当$\Delta t$ 很小时，可以认为，从时刻$t_0$到$t_0+\Delta t$这段时间内，速度来不及有很大变化，可以近似地看成匀速运动，因而这段时间内的平均速度就可以看成时刻$t_0$的瞬时速度的近似值。

显然，从时刻$t_0$到时刻$t_0+\Delta t$, 质点走过的路程为

\end{analyze}

